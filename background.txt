The Circular Field method :

%This thesis aims at enhancing motion planning based on Circular Field approaches. blabla. Manque
%blabla pour dire que je vous en parle parce que je l'am√©liore alors faut savoir de quoi on parle.

Introduction :
Robot Motion Planning is fondamental problem in robotics. The usual methods to steer a robot
throught an obstacle field are \i{roadmaps, cell-decomposition, potential fields}. The first two are
too time-consumming to be used on-line and require a very good knowledge of the environment. The
potential field method is based on the behavior of a charged particule in an electrostatic field.
In this scenario, the obstacles have the same charge as the robot, therefore repelling it, and the
goal position as the opposite charge to attract the robot.

The Circular Field method has been first developped in \cite{CF} as an alternative to the usual
potential field method.
% to achieve real-time motion planning of a point robot through an obstacle field. 
It is also a force based method, allowing real-time computation without an extensive knowledge of
the environment. However, the Circular field approach use the Laplace force associated to the
magnetic field generated by the obstacles.
Therefore, the circulatory field rotate the robot path around the obstacle without adding extra energy to the system. 
Combined with a attrative potential field to steer the robot to the goal, this approaches ensure global convergence
while avoiding collisions with obstacles.

Field definition :

Let's consider a point robot in a  3D obstacle field. 
In this section the robot position is denoted
\mathbf{x} and its speed \mathbf{dot{x}}.

The Attractive Field.
The attractive field expression coincide with the classical potential field definition. Denoting
\mathbf{x_d} the desired position of the robot, the potential field is expressed by :
\ref{pot_attractor}
U = 1/2k_a(x-x_d)^T(x-x_d).

The generated force is then :

\v{F_a} = -k_a(\v{x}-\v{x_d})

Obstacle field definition :

The obstacle field is generated by a virtual current circulating along the surfaces of obstacle
objects. The field generated by a current element is :

\mathbf{B_obs} = k_i int{(c_i\cross\vdu{x}/ri^2)da_i}

where da_i is the elemental surface element, c_i is the current vector along this surface, \vdu{x} is
the unit speed and r is the distance between the robot and the obstacle point corresponding to dl.
Although, this expression is slightly different from the expression of a magnetic field in
electromagnetic theory, its properties are identical : it is non-conservative, does-not work and is
circulatory.

The resulting force is :

\mathbf{F_obs} = \mathbf{dot{x}}\cross \v{B_obs}

These two expressions exhibit the circular fields caracteristics. The resulting force is always
perpendicular to the robot speed.
Which means that the robot is steered without speed change and therefore, without changing the energy
of the system. The direction in which the steering is done results from the the current \mathbf{c_i} definition. 
The field is circulatory since it depends on the trajectory (i.e. the speed and velocity) of the
particle.
The obstacle avoidance is ensured by the inverse square law to the distance to the obstacle.
Moreover, the robot is steered when it is heading to the obstacle until it is parallel to the
surface.


Damping force :

Additionnaly, a damping force is defined in the following manner :

Fd = -k_d\mathbf{dot{x}}

As a result the robot dynamics can be described by the system equation.

m\ddot{\mathbf{x}} =\mathbf{F_a}+\sum{\mathbf{F_obst,i}{i}}+\mathbf{F_d}

m\ddot{\mathbf{x}} =
-k_a(\mathbf{x}-\mathbf{x_d})+\mathbf{\dot{x}}\cross\sum{\mathbf{B_i}}{i}-k_d\mathbf{\dot{x}}
\ref{sys_dyn}
Proof of Goal convergence :

From this system equation, a proof of goal convergence can be derived simply as follows.

Let's define an energy-like Lyapunov Function \mathbf{\Upsilon}
\mathbf{\Upsilon} = m/2\mathbf{\dot{x}}^T\mathbf{\dot{x}} + U(x)

where U is the quadratic potential field from the attractor defined at \ref{pot_attractor}

The derivative of \mathbf{\Upsilon} is therefore :

\mathbf{\dot{\Upsilon}} = \frac{\partial\v{\Upsilon}}{\partial{\v{x}}\vd{x} =
\frac{m}{2}\vdt{x}\vdd{x}-\nabla U\vd{x}

Substituting the system dynamics \ref{sys_dyn} leads to :

\vd{\Gamma} = \vdt{x}\vd{x}\times\v{B} - k_d\vdt{x}\vd{x}.

Using the definition on the cross product, we know than \vdt{x}\vd{x}\times\v{B} = 0. Consequently,
we obtain

\vd{\Gamma} = - k_d\vdt{x}\vd{x} \leq 0.

Therefore, \v{x}=\v{x_d}, \vd{x} = 0 is globally asymptotically stable based on the LaSalle
Criterion, which means that the CF method has no local minimum.




In conclusion, the CF overcomes some limitations of the potential field method. Instead of simply
repelling the robot from obstacles, the CF field rotates the path around the obstacles. This
feature has the advantages of conserving energy of the system and of directly guiding the
robot according the current definition, that can be set according to the task to achieve.
Although, this sections shows that the CF methods has interesting features, reachability of the
target position cannot be insured and require a suitable definition of the surface current and of
the parameters k_a,k_d and k_i among others.


CF Shaping

In order to achieve ~~~ efficient motion planning, it is necessary to complete the CF
definition of \cite{CF}. The modifications slightly alter the properties of the
Circular Field as described in \ref{Field Definition}. 

The modifications can be organised in three groups.
-obstacle current definition, i.e. how the current on each individual object is defined.
-field enhancement
-scene current alteration, ie how the current on obstacles can be changed according to the scene
configuration.

The first two groups of CF extensions have been developped by Rico Belder in \cite{RicoThesis}, and
will be sumarized here. the last group is a novel contribution to this thesis.

Obstacle current definition.

In \cite{CF}, the authors proposes two alternative definitions for the surface current. Both of them
rely on independant current definition for every surfaces of the object, therefore leading to
inconsitency and oscilatting behavior. The current definition used in this thesis and developped in
\cite{RicoThesis} ensure that the current directions of each obstacle surfaces are interelated to
each other.

Let's define the rotation vector of an obstacle \v{r_obst} as

\v{r_obst} = \frac{\v{d_obst}\times\v{b}}{norm(\v{d_obst}\times\v{b})}
where b is the goal vector, linking the current position of the robot to the goal and where d_obst
is the vector from the center of mass of the obstacle to its orthogonal projection on b.

Then, for each surface element i of the obstacle whose normal is \v{n_i}, \v{c_i} is defined as :
\v{c_i} = \v{n_i}\times{r_obst}

For graphical representation, see figure \FIG

As a result of this definition, the current vectors are set tangent the surface elements and form a
~~ rotating vector field arround the center of mass of the obstacle, with r_obst as an axis.

Defined this way, the resulting obstacle force will tend to make the avoiding object rotate around
the obstacle counter-clockwise with respect to the axis r_obst. The given definition of r_obst,
leads the avoiding object around the obstacle in the direction of the shortest path to the goal.

Field enhancement

Adapting attractor

In section \ref{REF}, the attractor force, defined as

\v{F_a} = -k_a(\v{x}-\v{x_d})

may lead, due to relatively important speed, to increasing holding influence of obstacle CF. As a
consequence, the avoiding object may orbit a few times around the obstacle until it looses enough speed
(due to damping) to converge again to the goal.
